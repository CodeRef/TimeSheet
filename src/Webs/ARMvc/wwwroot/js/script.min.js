function localStorageSupport(){return"localStorage"in window&&null!==window.localStorage}function animationHover(e,t){e=$(e),e.hover(function(){e.addClass("animated "+t)},function(){window.setTimeout(function(){e.removeClass("animated "+t)},2e3)})}function SmoothlyMenu(){!$("body").hasClass("mini-navbar")||$("body").hasClass("body-small")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(400)},200)):$("body").hasClass("fixed-sidebar")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(400)},100)):$("#side-menu").removeAttr("style")}function WinMove(){var e="[class*=col]",t=".ibox-title",o="[class*=col]";$(e).sortable({handle:t,connectWith:o,tolerance:"pointer",forcePlaceholderSize:!0,opacity:.8}).disableSelection()}define(["angular","respond","controllers/controllers","filters/filters","directives/directives","services/services","angular.animate","angular.cookies","angular.resource","angular.route","angular.sanitize","angular-touch","uiBootstrapTpl","uiBootstrap","localStorageService"],function(e){return e.module("myAngularApp",["controllers","filters","directives","services","ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap","LocalStorageModule"])}),require.config({baseUrl:"/js",waitSeconds:200,paths:{angular:"../lib/angular/angular.min",jquery:"../lib/jquery/dist/jquery.min",moment:"../lib/momentjs/min/moment.min",respond:"../lib/respond/dest/respond.src",domReady:"../lib/requirejs-domready/domReady",bootstrap:"../lib/bootstrap/dist/js/bootstrap.min","angular.animate":"../lib/angular-animate/angular-animate.min","angular.cookies":"../lib/angular-cookies/angular-cookies.min","angular.resource":"../lib/angular-resource/angular-resource.min","angular.route":"../lib/angular-route/angular-route.min","angular.sanitize":"../lib/angular-sanitize/angular-sanitize.min","angular-touch":"../lib/angular-touch/angular-touch.min",uiBootstrap:"../lib/angular-ui-bootstrap-bower/ui-bootstrap.min",uiBootstrapTpl:"../lib/angular-ui-bootstrap-bower/ui-bootstrap-tpls.min",localStorageService:"../lib/angular-local-storage/dist/angular-local-storage.min","jquery.validation":"../lib/jquery-validation/dist/jquery.validate.min"},shim:{moment:{exports:"moment"},angular:{deps:["jquery","moment"],exports:"angular"},respond:{exports:"respond"},bootstrap:{deps:["jquery"],exports:"bootstrap"},"angular.animate":["angular"],"angular.cookies":["angular"],"angular.resource":["angular"],"angular.route":["angular"],"angular.sanitize":["angular"],"angular-touch":["angular"],uiBootstrap:{deps:["angular","bootstrap"],exports:"uiBootstrap"},uiBootstrapTpl:{deps:["angular","uiBootstrap"]},localStorageService:{deps:["angular"],exports:"LocalStorageModule"},"jquery.validation":{deps:["jquery"]}},urlArgs:"bust="+(new Date).getTime()}),$(document).ready(function(){function e(){var e=$("body > #wrapper").height()-61;$(".sidebard-panel").css("min-height",e+"px");var t=$("nav.navbar-default").height(),o=$("#page-wrapper").height();t>o&&$("#page-wrapper").css("min-height",t+"px"),o>t&&$("#page-wrapper").css("min-height",$(window).height()+"px"),$("body").hasClass("fixed-nav")&&$("#page-wrapper").css("min-height",$(window).height()-60+"px")}$(this).width()<769?$("body").addClass("body-small"):$("body").removeClass("body-small"),$("#side-menu").metisMenu(),$(".collapse-link").click(function(){var e=$(this).closest("div.ibox"),t=$(this).find("i"),o=e.find("div.ibox-content");o.slideToggle(200),t.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),e.toggleClass("").toggleClass("border-bottom"),setTimeout(function(){e.resize(),e.find("[id^=map-]").resize()},50)}),$(".close-link").click(function(){var e=$(this).closest("div.ibox");e.remove()}),$(".fullscreen-link").click(function(){var e=$(this).closest("div.ibox"),t=$(this).find("i");$("body").toggleClass("fullscreen-ibox-mode"),t.toggleClass("fa-expand").toggleClass("fa-compress"),e.toggleClass("fullscreen"),setTimeout(function(){$(window).trigger("resize")},100)}),$(".close-canvas-menu").click(function(){$("body").toggleClass("mini-navbar"),SmoothlyMenu()}),$("body.canvas-menu .sidebar-collapse").slimScroll({height:"100%",railOpacity:.9}),$(".right-sidebar-toggle").click(function(){$("#right-sidebar").toggleClass("sidebar-open")}),$(".sidebar-container").slimScroll({height:"100%",railOpacity:.4,wheelStep:10}),$(".open-small-chat").click(function(){$(this).children().toggleClass("fa-comments").toggleClass("fa-remove"),$(".small-chat-box").toggleClass("active")}),$(".small-chat-box .content").slimScroll({height:"234px",railOpacity:.4}),$(".check-link").click(function(){var e=$(this).find("i"),t=$(this).next("span");return e.toggleClass("fa-check-square").toggleClass("fa-square-o"),t.toggleClass("todo-completed"),!1}),$(".navbar-minimalize").click(function(){$("body").toggleClass("mini-navbar"),SmoothlyMenu()}),$(".tooltip-demo").tooltip({selector:"[data-toggle=tooltip]",container:"body"}),$(".modal").appendTo("body"),e(),$(window).bind("load",function(){$("body").hasClass("fixed-sidebar")&&$(".sidebar-collapse").slimScroll({height:"100%",railOpacity:.9})}),$(window).scroll(function(){$(window).scrollTop()>0&&!$("body").hasClass("fixed-nav")?$("#right-sidebar").addClass("sidebar-top"):$("#right-sidebar").removeClass("sidebar-top")}),$(window).bind("load resize scroll",function(){$("body").hasClass("body-small")||e()}),$("[data-toggle=popover]").popover(),$(".full-height-scroll").slimscroll({height:"100%"})}),$(window).bind("resize",function(){$(this).width()<769?$("body").addClass("body-small"):$("body").removeClass("body-small")}),$(document).ready(function(){if(localStorageSupport){var e=localStorage.getItem("collapse_menu"),t=localStorage.getItem("fixedsidebar"),o=localStorage.getItem("fixednavbar"),r=localStorage.getItem("boxedlayout"),n=localStorage.getItem("fixedfooter"),a=$("body");"on"==t&&(a.addClass("fixed-sidebar"),$(".sidebar-collapse").slimScroll({height:"100%",railOpacity:.9})),"on"==e&&(a.hasClass("fixed-sidebar")?a.hasClass("body-small")||a.addClass("mini-navbar"):a.hasClass("body-small")||a.addClass("mini-navbar")),"on"==o&&($(".navbar-static-top").removeClass("navbar-static-top").addClass("navbar-fixed-top"),a.addClass("fixed-nav")),"on"==r&&a.addClass("boxed-layout"),"on"==n&&$(".footer").addClass("fixed")}}),define(["angular"],function(e){"use strict";return e.module("controllers",[])}),define(["controllers/controllers"],function(e){e.controller("CreateShelfCtrl",["$scope","$location","BOOK","authService",function(e,t,o,r){r.fillAuthData(),e.authen=r.authentication,e.data={name:"default",description:"default"},e.submitForm=function(){console.log(e.data.name),console.log(e.data.description),console.log("posting data....")}}])}),define(["controllers/controllers"],function(e){e.controller("FogotPassCtrl",["$scope","$location","authService",function(e,t,o){$.backstretch(["../../Content/templates/metronic/assets/admin/pages/media/bg/5.jpg","../../Content/templates/metronic/assets/admin/pages/media/bg/6.jpg","../../Content/templates/metronic/assets/admin/pages/media/bg/7.jpg","../../Content/templates/metronic/assets/admin/pages/media/bg/8.jpg","../../Content/templates/metronic/assets/admin/pages/media/bg/9.jpg","../../Content/templates/metronic/assets/admin/pages/media/bg/10.jpg","../../Content/templates/metronic/assets/admin/pages/media/bg/11.jpg"],{fade:1e3,duration:8e3}),e.back=function(){t.path("/login")},e.forgotPassData={Email:""},e.savedSuccessfully=!1;var r=function(){$(".forget-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,ignore:"",rules:{email:{required:!0,email:!0}},messages:{email:{required:"Email is required."}},invalidHandler:function(e,t){},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error"),e.remove()},errorPlacement:function(e,t){e.insertAfter(t.closest(".input-icon"))},submitHandler:function(t){o.forgotPass(e.forgotPassData).then(function(t){e.savedSuccessfully=!0},function(t){e.message=t.error_description})}}),$(".forget-form input").keypress(function(e){return 13===e.which&&$(".forget-form").validate().form()&&$(".forget-form").submit(),!1})};r()}])}),define(["controllers/controllers"],function(e){e.controller("ProjectIndexCtrl",["$scope","books",function(e,t){console.log("ProjectIndexCtrl execute."),e.books=t}])}),define(["controllers/controllers"],function(e){e.controller("RegisterCtrl",["$scope","$location","$timeout","authService",function(e,t,o,r){$.backstretch(["../../Content/templates/metronic/assets/admin/pages/media/bg/5.jpg","../../Content/templates/metronic/assets/admin/pages/media/bg/6.jpg","../../Content/templates/metronic/assets/admin/pages/media/bg/7.jpg","../../Content/templates/metronic/assets/admin/pages/media/bg/8.jpg","../../Content/templates/metronic/assets/admin/pages/media/bg/9.jpg","../../Content/templates/metronic/assets/admin/pages/media/bg/10.jpg","../../Content/templates/metronic/assets/admin/pages/media/bg/11.jpg"],{fade:1e3,duration:8e3}),e.register={FirstName:"",LastName:"",Email:"",UserName:"",Password:"",ConfirmPassword:"",tnc:!1},e.back=function(){t.path("/login")},e.savedSuccessfully=!1,e.message="";var n=function(){$(".register-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,ignore:"",rules:{firstname:{required:!0},lastname:{required:!0},email:{required:!0,email:!0},username:{required:!0},password:{required:!0},rpassword:{equalTo:"#register_password"},tnc:{required:!0}},messages:{tnc:{required:"Please accept TNC first."}},invalidHandler:function(e,t){},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error"),e.remove()},errorPlacement:function(e,t){e.insertAfter("tnc"===t.attr("name")?$("#register_tnc_error"):1===t.closest(".input-icon").size()?t.closest(".input-icon"):t)},submitHandler:function(t){r.saveRegistration(e.register).then(function(t){e.savedSuccessfully=!0})["catch"](function(t){var o=[];for(var r in t.data.modelState)for(var n=0;n<t.data.modelState[r].length;n++)o.push(t.data.modelState[r][n]);e.message="Failed to register user due to:"+o.join(" "),$(".alert-danger",$(".register-form")).show()})}}),$(".register-form input").keypress(function(e){return 13===e.which?($(".register-form").validate().form()&&$(".register-form").submit(),!1):void 0})};n()}])}),define(["controllers/controllers"],function(e){e.controller("ShelfCtrl",["$scope","$location","BOOK","authService",function(e,t,o,r){r.fillAuthData(),r.authentication.isAuth||(window.location="/account/index"),e.books=o.get({},function(e){return console.log(e),e}),e.authen=r.authentication}])}),define(["angular"],function(e){"use strict";return e.module("directives",[])}),define(["angular"],function(e){"use strict";return e.module("filters",[])}),define(["services/services"],function(e){"use strict";e.factory("authInterceptorService",["$q","$injector","$location","localStorageService",function(e,t,o,r){var n={},a=function(e){e.headers=e.headers||{};var t=r.get("authorizationData");return t&&(e.headers.Authorization="Bearer "+t.token),e},i=function(n){if(401===n.status){var a=t.get("authService"),i=r.get("authorizationData");if(i&&i.useRefreshTokens)return o.path("/refresh"),e.reject(n);a.logOut(),o.path("/login")}return e.reject(n)};return n.request=a,n.responseError=i,n}])}),define(["services/services"],function(e){"use strict";e.factory("authService",["$http","$q","localStorageService",function(e,t,o){var r="http://localhost:31832/",n={},a={isAuth:!1,userName:"",useRefreshTokens:!1},i=function(t){return e.post(r+"api/accounts/register",t).then(function(e){return e})},s=function(i){var s="grant_type=password&username="+i.userName+"&password="+i.password,c=t.defer();return e.post(r+"oauth/token",s,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){o.set("authorizationData",{token:e.access_token,userName:i.userName,refreshToken:"",useRefreshTokens:!1}),a.isAuth=!0,a.userName=i.userName,a.useRefreshTokens=i.useRefreshTokens,n.authentication=a,c.resolve(e)}).error(function(e,t){l(),c.reject(e)}),c.promise},l=function(){o.remove("authorizationData"),a.isAuth=!1,a.userName="",a.useRefreshTokens=!1},c=function(){var e=o.get("authorizationData");e&&(a.isAuth=!0,a.userName=e.userName,a.useRefreshTokens=e.useRefreshTokens)},u=function(t){return e.post(r+"api/accounts/forgotpassword",t).then(function(e){return e})};return n.saveRegistration=i,n.login=s,n.logOut=l,n.fillAuthData=c,n.authentication=a,n.forgotPass=u,n}])}),define(["services/services"],function(e){e.factory("BOOK",["$resource",function(e){var t="http://localhost:31832/api/values/get",o=e(t,{},{get:{method:"GET",isArray:!0}});return o}])}),define(["services/services"],function(e){e.factory("MAP",["$resource",function(e){var t="http://localhost:31832/api/map/:id",o=e(t,{},{get:{method:"GET",isArray:!0}});return o}])}),define(["angular","angular.resource"],function(e){"use strict";return e.module("services",["ngResource"])}),define(["controllers/controllers"],function(e){e.controller("DefaultCtrl",["$scope","$location","authService",function(e,t,o){o.fillAuthData(),window.location=o.authentication.isAuth?"/home/index":"/home/login"}])}),define(["controllers/controllers"],function(e){e.controller("HomeCtrl",["$scope","$location","BOOK","authService","MAP",function(e,t,o,r,n){r.fillAuthData(),r.authentication.isAuth?(n.Id=1,n.Name="Hello",n.save(),e.authen=r.authentication):window.location="/home/login"}])}),define(["controllers/controllers"],function(e){e.controller("LoginCtrl",["$scope","$location","authService",function(e,t,o){function r(){o.login(e.loginData).then(function(e){window.location="/home/index"})["catch"](function(t){e.message="Failed to login : "+t.error_description,$(".alert-danger",$(".login-form")).show()})}e.loginData={userName:"",password:"",useRefreshTokens:!1},$(".login-form input").keypress(function(e){return 13===e.which?(console.log(e.which),r(),!1):void 0}),$(".login-form button").click(function(){return r(),!1})}])}),define(["controllers/controllers"],function(e){e.controller("MapCtrl",["$scope","$location","BOOK","authService",function(e,t,o,r){r.fillAuthData(),!r.authentication.isAuth}])}),define(["controllers/controllers"],function(e){e.controller("UserProfileCtrl",["$scope","$location","authService",function(e,t,o){o.fillAuthData()}])}),define(["controllers/controllers"],function(e){e.controller("ZoneCtrl",["$scope","$location","BOOK","authService",function(e,t,o,r){r.fillAuthData(),!r.authentication.isAuth}])}),require(["jquery","angular","app","domReady","controllers/register-controller","controllers/login-controller","controllers/forgot-controller","services/authInterceptorService","services/authService","bootstrap","jquery.backstretch","jquery.validation"],function(e,t,o,r){require.toUrl(".").split(".")[0];o.config(["$routeProvider","$httpProvider","$sceDelegateProvider","$locationProvider",function(e,t,o,r){o.resourceUrlWhitelist(["self",".*"]),e.when("/",{templateUrl:"/public/js/views/Account/partials/login.html",controller:"LoginCtrl",resolve:{}}).when("/register",{templateUrl:"/public/js/views/Account/partials/register.html",controller:"RegisterCtrl"}).when("/forgotpass",{templateUrl:"/public/js/views/Account/partials/forgot-pass.html",controller:"FogotPassCtrl"}).otherwise({redirectTo:"/"}),t.interceptors.push("authInterceptorService")}]).run(["$rootScope",function(e){e.$safeApply=function(t,o){t=t||e,o=o||function(){},t.$$phase?o():t.$apply(o)}}]).constant("$",e),r(function(){t.bootstrap(document.body,["myAngularApp"]),e("html").addClass("ng-app: myAngularApp")})}),require(["angular","app","domReady","controllers/home/default","services/authInterceptorService","services/authService","bootstrap"],function(e,t,o){require.toUrl(".").split(".")[0];t.config(["$routeProvider","$httpProvider","$sceDelegateProvider","$locationProvider",function(e,t,o,r){o.resourceUrlWhitelist(["self",".*"]),e.when("/",{templateUrl:"/js/views/Home/partials/default.html",controller:"DefaultCtrl",resolve:{}}).otherwise({redirectTo:"/"}),t.interceptors.push("authInterceptorService")}]).run(["$rootScope",function(e){e.$safeApply=function(t,o){t=t||e,o=o||function(){},t.$$phase?o():t.$apply(o)}}]).constant("$",$),o(function(){e.bootstrap(document.body,["myAngularApp"]),$("html").addClass("ng-app: myAngularApp")})}),require(["angular","app","domReady","controllers/home/home","controllers/home/login","controllers/home/map","controllers/home/zone","services/authInterceptorService","services/authService","services/book-service","services/map-service","bootstrap"],function(e,t,o){require.toUrl(".").split(".")[0];t.config(["$routeProvider","$httpProvider","$sceDelegateProvider","$locationProvider",function(e,t,o,r){o.resourceUrlWhitelist(["self",".*"]),e.when("/",{templateUrl:"/js/views/Home/partials/index.html",controller:"HomeCtrl",resolve:{}}).when("/login",{templateUrl:"/js/views/Home/partials/login.html",controller:"LoginCtrl",resolve:{}}).when("/map",{templateUrl:"/js/views/Home/partials/map.html",controller:"MapCtrl",resolve:{}}).when("/zone",{templateUrl:"/js/views/Home/partials/zone.html",controller:"ZoneCtrl",resolve:{}}).otherwise({redirectTo:"/"}),t.interceptors.push("authInterceptorService")}]).run(["$rootScope",function(e){e.$safeApply=function(t,o){t=t||e,o=o||function(){},t.$$phase?o():t.$apply(o)}}]).constant("$",$),o(function(){e.bootstrap(document.body,["myAngularApp"]),$("html").addClass("ng-app: myAngularApp")})}),require(["angular","app","domReady","controllers/home/login","services/authInterceptorService","services/authService","bootstrap"],function(e,t,o){require.toUrl(".").split(".")[0];t.config(["$routeProvider","$httpProvider","$sceDelegateProvider","$locationProvider",function(e,t,o,r){o.resourceUrlWhitelist(["self",".*"]),e.when("/",{templateUrl:"/js/views/Home/partials/login.html",controller:"LoginCtrl",resolve:{}}).otherwise({redirectTo:"/"}),t.interceptors.push("authInterceptorService")}]).run(["$rootScope",function(e){e.$safeApply=function(t,o){t=t||e,o=o||function(){},t.$$phase?o():t.$apply(o)}}]).constant("$",$),o(function(){e.bootstrap(document.body,["myAngularApp"]),$("html").addClass("ng-app: myAngularApp")})}),require(["angular","app","domReady","controllers/home/userprofile","services/book-service","services/authInterceptorService","services/authService","bootstrap"],function(e,t,o){require.toUrl(".").split(".")[0];t.config(["$routeProvider","$httpProvider","$sceDelegateProvider","$locationProvider",function(e,t,o,r){o.resourceUrlWhitelist(["self",".*"]),e.when("/",{templateUrl:"/js/views/Home/partials/userprofile.html",controller:"UserProfileCtrl",resolve:{}}).otherwise({redirectTo:"/"}),t.interceptors.push("authInterceptorService")}]).run(["$rootScope",function(e){e.$safeApply=function(t,o){t=t||e,o=o||function(){},t.$$phase?o():t.$apply(o)}}]).constant("$",$),o(function(){e.bootstrap(document.body,["myAngularApp"]),$("html").addClass("ng-app: myAngularApp")})}),require(["angular","app","domReady","controllers/product-controller","services/book-service","services/authInterceptorService","bootstrap"],function(e,t,o){require.toUrl(".").split(".")[0];t.config(["$routeProvider","$httpProvider","$sceDelegateProvider","$locationProvider",function(e,t,o,r){o.resourceUrlWhitelist(["self",".*"]),e.when("/",{templateUrl:"/public/js/views/Product/partials/product-index.html",controller:"ProjectIndexCtrl",resolve:{books:["BookLoader",function(e){return e()}]}}).otherwise({redirectTo:"/"}),t.interceptors.push("authInterceptorService")}]).run(["$rootScope",function(e){e.$safeApply=function(t,o){t=t||e,o=o||function(){},t.$$phase?o():t.$apply(o)}}]).constant("$",$),o(function(){e.bootstrap(document.body,["myAngularApp"]),$("html").addClass("ng-app: myAngularApp")})}),require(["angular","app","domReady","controllers/shelf-controller","controllers/createshelf-controller","services/book-service","services/authInterceptorService","services/authService","bootstrap"],function(e,t,o){require.toUrl(".").split(".")[0];t.config(["$routeProvider","$httpProvider","$sceDelegateProvider","$locationProvider",function(e,t,o,r){o.resourceUrlWhitelist(["self",".*"]),e.when("/",{templateUrl:"/public/js/views/Shelf/partials/index.html",controller:"ShelfCtrl",resolve:{}}).when("/create",{templateUrl:"/public/js/views/Shelf/partials/create.html",controller:"CreateShelfCtrl",resolve:{}}).otherwise({redirectTo:"/"}),t.interceptors.push("authInterceptorService")}]).run(["$rootScope",function(e){e.$safeApply=function(t,o){t=t||e,o=o||function(){},t.$$phase?o():t.$apply(o)}}]).constant("$",$),o(function(){e.bootstrap(document.body,["myAngularApp"]),$("html").addClass("ng-app: myAngularApp")})});